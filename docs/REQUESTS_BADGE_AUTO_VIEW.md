# –°—á–µ—Ç—á–∏–∫ –∑–∞—è–≤–æ–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞"

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å—á–µ—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫
–°—á–µ—Ç—á–∏–∫ –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π "–ó–∞—è–≤–∫–∏" —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫
- ‚úÖ –ì–æ—Ä–∏—Ç **–∫—Ä–∞—Å–Ω—ã–º** —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏
- ‚úÖ –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **—Å–µ—Ä—ã–º**, –µ—Å–ª–∏ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–µ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö —Å –∑–∞—è–≤–∫–∞–º–∏

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞"
–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–ø–∞–ø–∞ –∑–∞—è–≤–∫–∏:
- ‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤–∞—è" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞"
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö—ç—à –∑–∞—è–≤–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 3. –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
–î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å **"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞"** (viewed):
- üÜï –ù–æ–≤–∞—è (new) - –∑–µ–ª–µ–Ω—ã–π
- üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞ (viewed) - —Å–∏–Ω–∏–π
- ‚è≥ –í –æ–±—Ä–∞–±–æ—Ç–∫–µ (pending) - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (completed) - –≥–æ–ª—É–±–æ–π

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. admin/js/admin-panel.js
```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateRequestsBadge()
async function updateRequestsBadge() {
    const newCount = data.data.new || 0;
    badge.textContent = newCount;
    
    // –ö—Ä–∞—Å–Ω—ã–π —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ
    if (newCount > 0) {
        badge.classList.add('admin-badge-alert');
    } else {
        // –°–µ—Ä—ã–π –µ—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö
        badge.classList.add('admin-badge-inactive');
    }
}

// –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å "viewed"
function getStatusText(status) {
    const statuses = {
        'new': '–ù–æ–≤–∞—è',
        'viewed': '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞',  // ‚Üê –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
        'pending': '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ',
        'completed': '–ó–∞–≤–µ—Ä—à–µ–Ω–∞'
    };
}
```

### 2. admin/js/admin-request-popup.js
```javascript
window.openRequestPopup = async function(requestId) {
    // ... –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–∫–∏ ...
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –Ω–∞ "viewed"
    if (request.status === 'new') {
        await fetch(`/api/requests/${requestId}`, {
            method: 'PUT',
            body: JSON.stringify({ status: 'viewed' })
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
        updateRequestsBadge();
    }
}

// –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –≤ —Å–µ–ª–µ–∫—Ç
<option value="viewed">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞</option>
```

### 3. admin/css/admin-panel-styles.css
```css
/* –ö—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂ —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π */
.admin-badge-alert {
    background: var(--color-danger);
    animation: pulse 2s infinite;
}

/* –°–µ—Ä—ã–π –±–µ–π–¥–∂ */
.admin-badge-inactive {
    background: #999;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* –°—Ç–∏–ª—å –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞" */
.admin-status-viewed {
    background: rgba(52, 152, 219, 0.1);
    color: #3498db;
}
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –ø–æ—Å—Ç—É–ø–∞–µ—Ç
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ
2. –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "new"
3. –°—á–µ—Ç—á–∏–∫ –≤ –∞–¥–º–∏–Ω–∫–µ –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
4. –ë–µ–π–¥–∂ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç, –ø—Ä–∏–≤–ª–µ–∫–∞—è –≤–Ω–∏–º–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫—É
1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª–∏–∫–∞–µ—Ç "–û—Ç–∫—Ä—ã—Ç—å" –Ω–∞ –∑–∞—è–≤–∫–µ
2. –ü–æ–ø–∞–ø –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "viewed"
4. –°—á–µ—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1
5. –ï—Å–ª–∏ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –±–æ–ª—å—à–µ –Ω–µ—Ç, –±–µ–π–¥–∂ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–µ—Ä—ã–º
6. –í —Ç–∞–±–ª–∏—Ü–µ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞" (—Å–∏–Ω–∏–π)

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–±–æ—Ç–∞ —Å –∑–∞—è–≤–∫–æ–π
1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
   - "–í –æ–±—Ä–∞–±–æ—Ç–∫–µ" - –∫–æ–≥–¥–∞ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞—è–≤–∫–æ–π
   - "–ó–∞–≤–µ—Ä—à–µ–Ω–∞" - –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. –°—á–µ—Ç—á–∏–∫ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ —Å—Ç–∞—Ç—É—Å—ã

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
GET /api/requests/stats/summary

Response:
{
  "success": true,
  "data": {
    "total": 10,
    "new": 3,        ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞
    "pending": 2,
    "completed": 5,
    "archived": 0,
    "deleted": 0
  }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
```bash
PUT /api/requests/:id
Content-Type: application/json

{
  "status": "viewed"
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å
‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏
‚úÖ **–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è** - –ø—É–ª—å—Å–∏—Ä—É—é—â–∏–π –∫—Ä–∞—Å–Ω—ã–π –±–µ–π–¥–∂
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ** - —Å–µ—Ä—ã–π –±–µ–π–¥–∂ –∫–æ–≥–¥–∞ –≤—Å–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É:
```bash
curl -X POST http://localhost:3001/api/requests \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–µ—Å—Ç",
    "phone": "+79991234567",
    "request_type": "consultation"
  }'
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—á–µ—Ç—á–∏–∫:
```bash
curl http://localhost:3001/api/requests/stats/summary
```

–ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç.
