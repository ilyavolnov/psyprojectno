# –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω—å—à–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–ª –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏. –¢—Ä–µ–±–æ–≤–∞–ª—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞.

### –†–µ—à–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å –ë–î –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º API –∑–∞–ø—Ä–æ—Å–µ.

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### backend/database.js
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `reloadDatabase()` - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ë–î –∏–∑ —Ñ–∞–π–ª–∞
- –í—Å–µ –º–µ—Ç–æ–¥—ã `prepare()` —Ç–µ–ø–µ—Ä—å async –∏ –≤—ã–∑—ã–≤–∞—é—Ç `reloadDatabase()` –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- –ë–î –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è

### backend/routes/specialists.js
- –í—Å–µ —Ä–æ—É—Ç—ã —Ç–µ–ø–µ—Ä—å async
- GET `/api/specialists` - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- GET `/api/specialists/:id` - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- POST `/api/specialists` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É
- PUT `/api/specialists/:id` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É
- DELETE `/api/specialists/:id` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É

## üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ:
```javascript
// –ë–î –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
const db = loadDatabase();

// –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
router.get('/specialists', (req, res) => {
    const data = db.exec('SELECT * FROM specialists');
    res.json(data);
});
```

### –ü–æ—Å–ª–µ:
```javascript
// –ë–î –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
router.get('/specialists', async (req, res) => {
    await reloadDatabase(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    const data = db.exec('SELECT * FROM specialists');
    res.json(data);
});
```

## ‚úÖ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:

1. **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã:**
   ```bash
   node backend/create-test-specialist.js
   # –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ!
   ```

2. **–£–¥–∞–ª—è—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã:**
   ```bash
   node backend/clear-all-specialists.js
   # –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ!
   ```

3. **–ò–∑–º–µ–Ω—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î:**
   ```bash
   sqlite3 backend/database.sqlite "UPDATE specialists SET price=6000 WHERE id=1"
   # –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ!
   ```

4. **–†–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:**
   - –°–æ–∑–¥–∞–Ω–∏–µ ‚Üí —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ
   - –£–¥–∞–ª–µ–Ω–∏–µ ‚Üí —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å:
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ - —Ñ–∞–π–ª –ë–î –º–∞–ª–µ–Ω—å–∫–∏–π (–æ–±—ã—á–Ω–æ < 1MB)
- –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∑–∞–Ω–∏–º–∞–µ—Ç ~1-5ms
- –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —ç—Ç–æ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ

### –ï—Å–ª–∏ –ë–î —Å—Ç–∞–Ω–µ—Ç –±–æ–ª—å—à–æ–π (> 10MB):
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à —Å TTL:
```javascript
let cacheTime = 0;
const CACHE_TTL = 1000; // 1 —Å–µ–∫—É–Ω–¥–∞

async function reloadDatabase() {
    const now = Date.now();
    if (now - cacheTime < CACHE_TTL) {
        return db; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à
    }
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º
    const buffer = fs.readFileSync(dbPath);
    db = new SQL.Database(buffer);
    cacheTime = now;
    return db;
}
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –î–µ–π—Å—Ç–≤–∏–µ | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|--------|
| –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç | ‚ùå –ù—É–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ | ‚úÖ –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ |
| –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç | ‚ùå –ù—É–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ | ‚úÖ –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ |
| –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ë–î | ‚ùå –ù—É–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ | ‚úÖ –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ |

## üéâ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä **–ù–ï –ù–£–ñ–ù–û** –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ:
- –ó–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä—è–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î
- –õ—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã **–°–†–ê–ó–£** –≤ –∞–¥–º–∏–Ω–∫–µ –∏ –Ω–∞ —Å–∞–π—Ç–µ!
