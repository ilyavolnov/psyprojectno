# Production Deployment Checklist

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—è–≤–æ–∫

–í—Å–µ —Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞—è–≤–∫–∏ –≤ `/api/requests`:

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`script.js`) - ‚úÖ 
   - –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
   - –¢–∏–ø: `consultation`

2. **–ü–æ–ø–∞–ø –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏** (`consultation-popup.js`) - ‚úÖ
   - –°—Ä–æ—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
   - –°–µ–º–µ–π–Ω–∞—è —Å–µ—Å—Å–∏—è
   - –ó–∞–ø–∏—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É

3. **–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã** (`specialist-payment.js`) - ‚úÖ
   - –û–ø–ª–∞—Ç–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
   - –¢–∏–ø: `specialist`

4. **–°—É–ø–µ—Ä–≤–∏–∑–∏–∏** (`pages/supervisions/supervision-popup.js`) - ‚úÖ
   - –ó–∞–ø–∏—Å—å –Ω–∞ —Å—É–ø–µ—Ä–≤–∏–∑–∏—é
   - –¢–∏–ø: `supervision`

5. **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** (`pages/certificates/certificates.js`) - ‚úÖ
   - –ó–∞–∫–∞–∑ –ø–æ–¥–∞—Ä–æ—á–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   - –¢–∏–ø: `certificate`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. API URLs

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `http://localhost:3001/api`
- –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ `script.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL
- ‚úÖ `consultation-popup.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL
- ‚úÖ `specialist-payment.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL
- ‚úÖ `pages/certificates/certificates.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL
- ‚úÖ `order-popup.js` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL
- ‚ö†Ô∏è `pages/supervisions/supervision-popup.js` - –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω
- ‚ö†Ô∏è `admin/js/admin-panel.js` - –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω
- ‚ö†Ô∏è `admin/js/admin-request-popup.js` - –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Server
PORT=3001
NODE_ENV=production

# Database
DATABASE_PATH=./database.sqlite

# Telegram Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_ADMIN_ID=your_admin_id_here
TELEGRAM_ENABLED=false

# PayKeeper (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
PAYKEEPER_SERVER=your_paykeeper_server
PAYKEEPER_SECRET=your_secret_key
```

### 3. Vercel Configuration

–§–∞–π–ª `vercel.json` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è:
- API —Ä–æ—É—Ç—ã —á–µ—Ä–µ–∑ serverless functions
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ CDN
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ rewrites –¥–ª—è SPA

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- SQLite —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `database.sqlite` –≤ `.gitignore`
- –î–ª—è Vercel: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω—é—é –ë–î (PostgreSQL, MySQL) –∏–ª–∏ Vercel KV

### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- [ ] –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin/admin123)
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS
- [ ] –î–æ–±–∞–≤—å—Ç–µ rate limiting –¥–ª—è API
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–í `backend/server.js` —É–∂–µ –µ—Å—Ç—å:**
```javascript
app.use(cors({
    origin: process.env.ALLOWED_ORIGINS?.split(',') || '*'
}));
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
```

### 6. Telegram Bot

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
3. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π ID —á–µ—Ä–µ–∑ @userinfobot
4. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ ID
5. –í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### 7. –ü—Ä–æ–º–æ–∫–æ–¥—ã

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ API –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ –≤—Å–µ –ø–æ–ø–∞–ø—ã –æ–ø–ª–∞—Ç—ã

**–¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã:**
- WELCOME10 (10%)
- SAVE20 (20%)
- FIRST (15%)

### 8. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º:**
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `/images/`
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `/images/uploads/`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `uploads` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS/–í—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. —Ñ–∞–π–ª `DEPLOY_VPS.md`

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–µ—Ä–≤–µ—Ä–æ–º
- ‚úÖ SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ
- ‚úÖ Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git clone https://github.com/ilyavolnov/psyproject.git
cd psyproject
npm install
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
pm2 start ecosystem.config.js
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Vercel (Serverless)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ö†Ô∏è SQLite –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–Ω–∞ –≤–Ω–µ—à–Ω—è—è –ë–î)
- ‚ö†Ô∏è Telegram –±–æ—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–π

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è Vercel

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI
npm i -g vercel

# –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
vercel login
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
vercel

# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
# - Set up and deploy? Yes
# - Which scope? Your account
# - Link to existing project? No
# - Project name? psyproject
# - Directory? ./
# - Override settings? No
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables –¥–æ–±–∞–≤—å—Ç–µ:
- `NODE_ENV` = `production`
- `TELEGRAM_BOT_TOKEN` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
- `TELEGRAM_ADMIN_ID` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
- `ALLOWED_ORIGINS` = `https://yourdomain.vercel.app`

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π

```bash
# Production deploy
vercel --prod
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ñ–æ—Ä–º—ã:
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —Ñ–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- [ ] –ü–æ–ø–∞–ø –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏
- [ ] –ó–∞–ø–∏—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É
- [ ] –ó–∞–ø–∏—Å—å –Ω–∞ —Å—É–ø–µ—Ä–≤–∏–∑–∏—é
- [ ] –ó–∞–∫–∞–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
- [ ] –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã:
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –≤ –ø–æ–ø–∞–ø–µ –æ–ø–ª–∞—Ç—ã
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∏–¥–∫–∏

## üìù –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞**
   - –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
   - –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞**
   - –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

3. **–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã**
   - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –ü—Ä–æ–º–æ–∫–æ–¥—ã
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É**
   - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –î–∞—à–±–æ—Ä–¥
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üêõ Troubleshooting

### –ó–∞—è–≤–∫–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ Admin ID
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–æ–º–æ–∫–æ–¥—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
